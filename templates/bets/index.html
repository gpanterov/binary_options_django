<!DOCTYPE html>
<html>

    <head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>


<script>
	var interval;
	function update(){
    $.ajax({
		type: "GET",
		url:'/bets/update/',
		data: {category_id:5,zzz:5 },
		datatype: 'json',
		success: function(data){

		var asset_price = data['eurusd'];
		$('#current_price').html(asset_price);
		$('#current_time').html(data['time']);
		$('#expire').html(data['expire']);
		$('#call_strike1').html(data['call_strike1']);
		$('#call_strike2').html(data['call_strike2']);
		$('#call_strike3').html(data['call_strike3']);
		$('#call_strike4').html(data['call_strike4']);
		$('#call_strike5').html(data['call_strike5']);

		$('#call_payout1').html(data['call_payout1']);
		$('#call_payout2').html(data['call_payout2']);
		$('#call_payout3').html(data['call_payout3']);
		$('#call_payout4').html(data['call_payout4']);
		$('#call_payout5').html(data['call_payout5']);

		$('#put_strike1').html(data['put_strike1']);
		$('#put_strike2').html(data['put_strike2']);
		$('#put_strike3').html(data['put_strike3']);
		$('#put_strike4').html(data['put_strike4']);
		$('#put_strike5').html(data['put_strike5']);

		$('#put_payout1').html(data['put_payout1']);
		$('#put_payout2').html(data['put_payout2']);
		$('#put_payout3').html(data['put_payout3']);
		$('#put_payout4').html(data['put_payout4']);
		$('#put_payout5').html(data['put_payout5']);

		$('#balance').html(data['balance']);
		$('#recent_bets').html(data['tb']);
		interval = setTimeout(update, 1000);
			}
		});
	}
</script>
<script>
	$('document').ready(function(){
	update();})
</script>




<script>
	$('document').ready(function(){
    var form = $('#betsize');
	var user = $('#user').html();
	$("#call_strike1_place").click(function(){
		var payout = $('#call_payout1').html();	
		var strike = $('#call_strike1').html();
		$('#bet_payout').val(payout);
		$('#bet_strike').val(strike);
		$('#bet_type').val("CALL");
    	$.ajax( 
			{type: "POST",
			url:'/bets/place_bets/',
			data: form.serialize(),
			success: function(response) {
			$('#status').html(response);
		<!--	alert(response); -->
			}
			});
		
		});
		$("#call_strike2_place").click(function(){
		var payout = $('#call_payout2').html();	
		var strike = $('#call_strike2').html();
		$('#bet_payout').val(payout);
		$('#bet_strike').val(strike);
		$('#bet_type').val("CALL");
    	$.ajax( 
			{type: "POST",
			url:'/bets/place_bets/',
			data: form.serialize(),
			success: function(response) {

			$('#status').html(response);
		<!--	alert(response); -->
			}
			});
		});

		$("#call_strike3_place").click(function(){
		var payout = $('#call_payout3').html();	
		var strike = $('#call_strike3').html();
		$('#bet_payout').val(payout);
		$('#bet_strike').val(strike);
		$('#bet_type').val("CALL");
    	$.ajax( 
			{type: "POST",
			url:'/bets/place_bets/',
			data: form.serialize(),
			success: function(response) {

			$('#status').html(response);
		<!--	alert(response); -->
			}
			});
		});

		$("#call_strike4_place").click(function(){
		var payout = $('#call_payout4').html();	
		var strike = $('#call_strike4').html();
		$('#bet_payout').val(payout);
		$('#bet_strike').val(strike);
		$('#bet_type').val("CALL");
    	$.ajax( 
			{type: "POST",
			url:'/bets/place_bets/',
			data: form.serialize(),
			success: function(response) {

			$('#status').html(response);
		<!--	alert(response); -->
			}
			});
		});

		$("#call_strike5_place").click(function(){
		var payout = $('#call_payout5').html();	
		var strike = $('#call_strike5').html();
		$('#bet_payout').val(payout);
		$('#bet_strike').val(strike);
		$('#bet_type').val("CALL");
    	$.ajax( 
			{type: "POST",
			url:'/bets/place_bets/',
			data: form.serialize(),
			success: function(response) {

			$('#status').html(response);
		<!--	alert(response); -->
			}
			});
		});

	$("#put_strike1_place").click(function(){
		var payout = $('#put_payout1').html();	
		var strike = $('#put_strike1').html();
		$('#bet_payout').val(payout);
		$('#bet_strike').val(strike);
		$('#bet_type').val("PUT");
    	$.ajax( 
			{type: "POST",
			url:'/bets/place_bets/',
			data: form.serialize(),
			success: function(response) {

			$('#status').html(response);
		<!--	alert(response); -->
			}
			});
		
		});
		$("#put_strike2_place").click(function(){
		var payout = $('#put_payout2').html();	
		var strike = $('#put_strike2').html();
		$('#bet_payout').val(payout);
		$('#bet_strike').val(strike);
		$('#bet_type').val("PUT");
    	$.ajax( 
			{type: "POST",
			url:'/bets/place_bets/',
			data: form.serialize(),
			success: function(response) {

			$('#status').html(response);
		<!--	alert(response); -->
			}
			});
		});

		$("#put_strike3_place").click(function(){
		var payout = $('#put_payout3').html();	
		var strike = $('#put_strike3').html();
		$('#bet_payout').val(payout);
		$('#bet_strike').val(strike);
		$('#bet_type').val("PUT");
    	$.ajax( 
			{type: "POST",
			url:'/bets/place_bets/',
			data: form.serialize(),
			success: function(response) {

			$('#status').html(response);
		<!--	alert(response); -->
			}
			});
		});

		$("#put_strike4_place").click(function(){
		var payout = $('#put_payout4').html();	
		var strike = $('#put_strike4').html();
		$('#bet_payout').val(payout);
		$('#bet_strike').val(strike);
		$('#bet_type').val("PUT");
    	$.ajax( 
			{type: "POST",
			url:'/bets/place_bets/',
			data: form.serialize(),
			success: function(response) {

			$('#status').html(response);
		<!--	alert(response); -->
			}
			});
		});
		$("#put_strike5_place").click(function(){
		var payout = $('#put_payout5').html();	
		var strike = $('#put_strike5').html();
		$('#bet_payout').val(payout);
		$('#bet_strike').val(strike);
		$('#bet_type').val("PUT");
    	$.ajax( 
			{type: "POST",
			url:'/bets/place_bets/',
			data: form.serialize(),
			success: function(response) {

			$('#status').html(response);
		<!--	alert(response); -->
			}
			});
		});

	
});
</script>



        <title>Binary Options</title>
    </head>
<a href="/bets/login/">Login</a>
<a href="/bets/register/">Register</a>
<a href="/bets/logout/">Logout</a>
<a href="/bets/deposit/"> Deposit 100 </a>

<p> Welcome  {{ user }}  </p>
    <body>
<table>
		<thead>
			<tr>
				<th>Balance</th>
				<th id='balance'> 0 </th>
											</tr>
		</thead>
	</table>

        <h1>Binary Options</h1>

<table>
		<thead>
			<tr>
				<th>Current Time</th>
				<th>Current Price</th>
				<th>Expires on</th>
											</tr>
		</thead>
		<tbody>
			<tr>
				<td id="current_time"> Time </td>
				<td id="current_price"> Price </td>
				<td id="expire"> Expire </td>
				</tr>
			</tbody>
		</table>

	<form id='betsize' name='betsize' method='post' action='/bets/place_bets/'>
		{% csrf_token %}
		{{ bets_form.as_p }}
	<input id="bet_strike" type="hidden" name="bet_strike" value="" />
	<input id="bet_type" type="hidden" name="bet_type" value="" />
	<input id="bet_payout" type="hidden" name="bet_payout" value="" />
	<input id="asset" type="hidden" name="asset" value="eurusd" />

	</form>	

<div style="width: 400px; float: left;">
<h2>Call Options </h2>
<table>
		<thead>
			<tr>
				<th>Strike</th>
				<th>Payout</th>
				<th></th>
											</tr>
		</thead>
		<tbody>
			<tr>
				<td id="call_strike1"> Strike 1 </td>
				<td id="call_payout1">2</td>
				<td><button id="call_strike1_place"> Bet </button></td>
				</tr>
			<tr>
				<td id="call_strike2"> Strike 2 </td>
				<td id = "call_payout2">3</td>
				<td><button id="call_strike2_place"> Bet </button></td>
			</tr>
			<tr>
				<td id="call_strike3"> Strike 2 </td>
				<td id = "call_payout3">3</td>
				<td><button id="call_strike3_place"> Bet </button></td>
			</tr>
			<tr>
				<td id="call_strike4"> Strike 2 </td>
				<td id = "call_payout4">3</td>
				<td><button id="call_strike4_place"> Bet </button></td>
			</tr>
			<tr>
				<td id="call_strike5"> Strike 2 </td>
				<td id = "call_payout5">3</td>
				<td><button id="call_strike5_place"> Bet </button></td>
			</tr>

			</tbody>
		</table>
</div>

<div  style="width: 400px; float: left;">
<h2>Put Options </h2>
<table>
		<thead>
			<tr>
				<th>Strike</th>
				<th>Payout</th>
				<th></th>
											</tr>
		</thead>
		<tbody>
			<tr>
				<td id="put_strike1"> Strike 1 </td>
				<td id="put_payout1">2</td>
				<td><button id="put_strike1_place"> Bet </button></td>
				</tr>
			<tr>
				<td id="put_strike2"> Strike 2 </td>
				<td id = "put_payout2">30</td>
				<td><button id="put_strike2_place"> Bet </button></td>
			</tr>
			<tr>
				<td id="put_strike3"> Strike 2 </td>
				<td id = "put_payout3">30</td>
				<td><button id="put_strike3_place"> Bet </button></td>
			</tr>
			<tr>
				<td id="put_strike4"> Strike 2 </td>
				<td id = "put_payout4">30</td>
				<td><button id="put_strike4_place"> Bet </button></td>
			</tr>

			<tr>
				<td id="put_strike5"> Strike 2 </td>
				<td id = "put_payout5">30</td>
				<td><button id="put_strike5_place"> Bet </button></td>
			</tr>

			</tbody>
		</table>
<div style="width: 400px; float: left;">

<h3> Status of last action </h3>
<p id="status"> <p>
</div>

<div class="row">
<h3> Most Recent bets </h3>
<table>
		<thead>
			<tr>
				<th>Size</th>
				<th>Payout</th>
				<th>Strike</th>
				<th>Expiration</th>
				<th>Outcome</th>
										</tr>

		</thead>
		<tbody id="recent_bets">
		</tbody>
</div>	

    </body>

</html>


